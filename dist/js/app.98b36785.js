(function(e){function t(t){for(var o,r,a=t[0],l=t[1],c=t[2],d=0,u=[];d<a.length;d++)r=a[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&u.push(s[r][0]),s[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);h&&h(t);while(u.length)u.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],o=!0,a=1;a<i.length;a++){var l=i[a];0!==s[l]&&(o=!1)}o&&(n.splice(t--,1),e=r(r.s=i[0]))}return e}var o={},s={app:0},n=[];function r(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=o,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var h=l;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";i("85ec")},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var o=i("2b0e"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},n=[],r={name:"App"},a=r,l=(i("034f"),i("2877")),c=Object(l["a"])(a,s,n,!1,null,null,null),h=c.exports,d=i("8c4f"),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showHide.loginShow,expression:"showHide.loginShow"}],staticClass:"login_container"},[i("div",{staticClass:"login_box"},[e._m(0),i("el-form",{attrs:{model:e.loginFrom}},[i("el-form-item",{attrs:{prop:"username"}},[i("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.loginFrom.username,callback:function(t){e.$set(e.loginFrom,"username",t)},expression:"loginFrom.username"}})],1),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.loginFrom.password,callback:function(t){e.$set(e.loginFrom,"password",t)},expression:"loginFrom.password"}})],1),i("el-form-item",{staticClass:"btns"},[i("el-button",{staticClass:"btn-login",attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)],1)],1)]),i("el-container",{directives:[{name:"show",rawName:"v-show",value:e.showHide.indexShow,expression:"showHide.indexShow"}],staticClass:"container"},[i("el-header",[e._v("云坐席Demo2")]),i("el-container",[i("el-aside",{staticStyle:{border:"1px"},attrs:{width:"500px"}},[i("h1",{staticStyle:{"line-height":"30px"}},[e._v("设备列表")]),i("table",{attrs:{border:"1"}},[i("tr",{staticStyle:{"line-height":"80px"}},[i("th",[e._v("设备Id")]),i("th",[e._v("设备名称")]),i("th",[e._v("设备类型")]),i("th",[e._v("设备状态")]),i("th",[e._v("操作")])]),e._l(e.deviceList,(function(t,o){return i("tr",{key:o,staticStyle:{"line-height":"30px"}},[i("td",{attrs:{height:"50px"}},[e._v(e._s(t.deviceId))]),i("td",{attrs:{height:"50px"}},[e._v(e._s(t.deviceName))]),i("td",{attrs:{height:"50px"}},[e._v(e._s(t.deviceType))]),i("td",{attrs:{height:"50px"}},[e._v(e._s(t.action))]),i("td",[i("el-button",{attrs:{type:"primary"},on:{click:function(i){return e.clickDeviceId(t.deviceId)}}},[e._v("呼叫")])],1)])}))],2)]),i("el-main",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showHide.operate,expression:"showHide.operate"}]},[i("el-button",{attrs:{type:"primary"},on:{click:e.openTheGate}},[e._v("开闸")]),i("el-button",{attrs:{type:"primary"},on:{click:e.closeTheGate}},[e._v("关闸")]),i("el-button",{attrs:{type:"primary"},on:{click:e.intercom}},[e._v("DH-对讲")]),i("el-button",{attrs:{type:"primary"},on:{click:e.closeRT}},[e._v("关闭")]),i("br"),i("h1",[e._v("对讲视频")]),i("video",{directives:[{name:"show",rawName:"v-show",value:e.showHide.dhvideo,expression:"showHide.dhvideo"}],ref:"box1",staticStyle:{height:"280px"}})],1)]),i("el-aside",{staticStyle:{border:"1px"},attrs:{width:"450px"}},[i("h1",{staticStyle:{"line-height":"30px"}},[e._v("通知列表")]),i("table",{attrs:{border:"1"}},[i("tr",{staticStyle:{"line-height":"80px"}},[i("th",[e._v("设备名称")]),i("th",[e._v("设备状态")]),i("th",[e._v("操作")])]),e._l(e.onNotifyList,(function(t,o){return i("tr",{key:o,staticStyle:{"line-height":"30px"}},[i("td",{attrs:{height:"50px"}},[e._v(e._s(t.deviceId))]),i("td",{attrs:{height:"50px"}},[e._v(e._s(t.deviceName))]),i("td",{attrs:{height:"50px"}},[e._v(e._s(t.deviceType))]),i("td",{attrs:{height:"50px"}},[e._v(e._s(t.action))]),i("td",[i("el-button",{attrs:{type:"primary"},on:{click:function(i){return e.clickDeviceIds(t.deviceId)}}},[e._v("呼叫")])],1)])}))],2)])],1)],1)],1)},p=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"title-container"},[i("h3",{staticClass:"title"},[e._v("泊特云对讲")])])}],g=i("2909"),v=(i("d3b7"),i("159b"),i("a434"),{name:"Login",data:function(){return{showHide:{loginShow:!0,indexShow:!1,isLogin:!0,dhvideo:!1,operate:!1,callShow:!0},loginStatus:"",id:"",loginFrom:{username:"ceshi1",password:"ceshi1",serverAdds:"pasikapark.xyz",port:"8088"},onNotifyList:[],user:{},count:[],deviceList:[],dhWeb:new DHAlarmWeb}},created:function(){console.log("原始对象数组",this.count),console.log("真实对象数组",this.deviceList)},mounted:function(){var e=this;console.log("------------mounted------------"),this.dhWeb.onLogin=function(t){e.onLogin(t)},this.dhWeb.onDeviceList=function(t){e.onDeviceList(t)},this.dhWeb.onNotify=function(t){e.onNotify(t)};var t=sessionStorage.getItem("isLogin"),i=sessionStorage.getItem("dhUname"),o=sessionStorage.getItem("dhPwd");"true"===t&&null!=i&&null!=o&&this.login()},updated:function(){},methods:{login:function(){this.dhWeb.setWebsocketPort({dataWsPort:this.loginFrom.port,mediaWsPort:this.loginFrom.port}),this.dhWeb.login(this.loginFrom.username,this.loginFrom.password,this.loginFrom.serverAdds),sessionStorage.setItem("dhUname",this.loginFrom.username),sessionStorage.setItem("dhPwd",this.loginFrom.password),sessionStorage.setItem("dhServerIp",this.loginFrom.serverAdds),sessionStorage.setItem("dhPort",this.loginFrom.port),localStorage.setItem("dhUname",this.loginFrom.username),localStorage.setItem("dhPwd",this.loginFrom.password),localStorage.setItem("dhServerIp",this.loginFrom.serverAdds),localStorage.setItem("dhPort",this.loginFrom.port)},onDeviceList:function(e){var t,i=e.params.list;(t=this.deviceList).push.apply(t,Object(g["a"])(i))},onNotify:function(e){var t=this,i=e.params;this.count.push(i),this.count.forEach((function(e){t.deviceList.forEach((function(t){t.deviceId==e.deviceId&&null!=t&&Object.assign(t,e)}))}));var o=i.deviceId;this.id=o,"Start"==i.action?(this.$message({message:"呼叫来了",type:"success"}),this.deviceList.forEach((function(e){e.deviceId==o&&(console.log(e),t.onNotifyList.push(e))}))):"Dealing"==i.action&&(this.$message({message:"呼叫正在处理",type:"success"}),this.deviceList.forEach((function(e){e.deviceId==o&&(console.log(e),t.onNotifyList.splice(e))})))},clickDeviceId:function(e){this.id=e,this.showHide.operate=!0},clickDeviceIds:function(){var e=this;this.showHide.operate=!0,this.dhWeb.startTalk(this.id),this.showHide.dhvideo=!0,this.dhWeb.playRT(this.$refs.box1,this.id,sessionStorage.getItem("loginHandle"),!0),this.deviceList.forEach((function(t){t.deviceId==e.id&&(console.log(t),e.onNotifyList.splice(t))}))},onLogin:function(e){if("success"==e.error)this.$message({message:"登录成功"+e.error,type:"success"}),this.showHide.indexShow=!0,this.showHide.loginShow=!1,this.loginState="在线",this.isLogin=!0,sessionStorage.setItem("loginHandle",e.params.loginHandle),sessionStorage.setItem("isLogin",this.isLogin);else if("repeat"==e.error){if(sessionStorage.setItem(!0))return}else"authfail"==e.error?this.$message({message:"账号密码错误",type:"error"}):this.$message({message:"登录失败",type:"error"})},openTheGate:function(){var e=this.id;this.dhWeb.doControl(e,sessionStorage.getItem("loginHandle"),1),console.log("开闸成功")},closeTheGate:function(){var e=this.id;this.dhWeb.doControl(e,sessionStorage.getItem("loginHandle"),2),console.log("关闸成功")},intercom:function(){var e=this.id;console.log(e),this.dhWeb.startTalk(e),this.showHide.dhvideo=!0,this.dhWeb.playRT(this.$refs.box1,e,sessionStorage.getItem("loginHandle"),!0)},closeRT:function(){var e=this.id;console.log(e),this.showHide.dhvideo=!1,this.showHide.operate=!1,this.dhWeb.stopRT(e,sessionStorage.getItem("loginHandle"))}}}),m=v,f=(i("bf63"),Object(l["a"])(m,u,p,!1,null,"4cf0e9a6",null)),w=f.exports;o["default"].use(d["a"]);var b=[{path:"/",redirect:"/login"},{path:"/login",component:w}],y=new d["a"]({routes:b}),_=y,S=i("5c96"),x=i.n(S);i("0fae");o["default"].use(x.a),o["default"].config.productionTip=!1,new o["default"]({render:function(e){return e(h)},router:_}).$mount("#app")},"85ec":function(e,t,i){},bf63:function(e,t,i){"use strict";i("ecf9")},ecf9:function(e,t,i){}});
//# sourceMappingURL=app.98b36785.js.map